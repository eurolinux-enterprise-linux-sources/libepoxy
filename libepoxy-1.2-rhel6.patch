--- libepoxy-1.2/src/gen_dispatch.py	2014-05-13 20:22:08.000000000 -0400
+++ libepoxy-1.2/src/gen_dispatch.py.jx	2016-01-11 13:45:29.867433244 -0500
@@ -27,6 +27,7 @@ import argparse
 import xml.etree.ElementTree as ET
 import re
 import os
+import sets
 
 class GLProvider(object):
     def __init__(self, condition, condition_name, loader, name):
@@ -63,14 +64,7 @@ class GLFunction(object):
         # These are functions with hand-written wrapper code in
         # dispatch_common.c.  Their dispatch entries are replaced with
         # non-public symbols with a "_unwrapped" suffix.
-        wrapped_functions = {
-            'glBegin',
-            'glEnd',
-            'wglMakeCurrent',
-            'wglMakeContextCurrentEXT',
-            'wglMakeContextCurrentARB',
-            'wglMakeAssociatedContextCurrentAMD',
-        }
+        wrapped_functions = [ 'glBegin', 'glEnd' ]
 
         if name in wrapped_functions:
             self.wrapped_name = name + '_unwrapped'
@@ -204,7 +198,7 @@ class Generator(object):
 
     def parse_typedefs(self, reg):
         for t in reg.findall('types/type'):
-            if 'name' in t.attrib and t.attrib['name'] not in {'GLhandleARB'}:
+            if 'name' in t.attrib and t.attrib['name'] not in ['GLhandleARB']:
                 continue
 
             # The gles1/gles2-specific types are redundant
@@ -401,7 +395,7 @@ class Generator(object):
                 condition = 'epoxy_conservative_has_wgl_extension("{0}")'.format(extname)
                 loader = 'wglGetProcAddress({0})'
                 self.process_require_statements(extension, condition, loader, human_name)
-            if {'gl', 'gles1', 'gles2'}.intersection(apis):
+	    if sets.Set(['gl', 'gles1', 'gles2']).intersection(apis):
                 human_name = 'GL extension \\"{0}\\"'.format(extname)
                 condition = 'epoxy_conservative_has_gl_extension("{0}")'.format(extname)
                 loader = 'epoxy_get_proc_address({0})'
--- libepoxy-1.2/test/Makefile.am	2016-01-11 13:45:07.742805876 -0500
+++ libepoxy-1.2/test/Makefile.am.jx	2016-01-11 13:45:59.118940578 -0500
@@ -181,7 +181,7 @@ glx_static_LDFLAGS = -static
 
 glx_shared_znow_SOURCES = glx_static.c
 glx_shared_znow_LDADD = $(DLOPEN_LIBS) $(EPOXY) libglx_common.la $(X11_LIBS)
-glx_shared_znow_LDFLAGS = -z now
+glx_shared_znow_LDFLAGS = -Wl,-z,now
 
 khronos_typedefs_SOURCES = \
 	khronos_typedefs.c \
